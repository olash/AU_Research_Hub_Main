<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project</title>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- CSS -->
    <link href="../style.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Footer CSS -->
    <link rel="stylesheet" href="/css/footer.css">
</head>

<body class="font-inter">
    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <a href="/">
                    <div class="flex items-center space-x-3">
                        <div class="flex items-center">
                            <div class="w-16 py-6">
                                <img src="../images/AUlogo.png" alt="AU Logo">
                            </div>
                            <span class="text-xl font-medium">X</span>
                            <div class="w-14 h-14">
                                <img src="../images/UNILAG.webp" alt="UNILAG logo">
                            </div>
                        </div>
                    </div>
                </a>

                <!-- Desktop Navigation -->
                <nav class="hidden md:flex items-center space-x-8">
                    <a href="/" class="text-gray-700 hover:text-blue-600 transition-colors">Home</a>
                    <a href="/resources" class="text-gray-700 hover:text-blue-600 transition-colors">Resources</a>
                    <a href="/gallery" class="text-gray-700 hover:text-blue-600 transition-colors">Gallery</a>
                </nav>

                <!-- Desktop CTA and Search -->
                <div class="hidden md:flex items-center space-x-4">
                    <button id="openSearch" class="p-2 text-gray-500 hover:text-gray-800">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-4.35-4.35m1.1-4.65a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </button>
                    <a href="https://tally.so/r/mBVWK1">
                        <button
                            class="bgBlue hover:bg-blue-600 text-white px-4 py-2 rounded-full text-sm font-medium transition-colors flex items-center">
                            Submit a Paper
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" style="fill: white;"
                                    d="M7 7h8.586L5.293 17.293l1.414 1.414L17 8.414V17h2V5H7v2z" />
                            </svg>
                        </button>
                    </a>
                </div>

                <!-- Mobile menu button -->
                <button id="mobile-menu-btn" class="md:hidden p-2 text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Mobile menu -->
        <div id="mobile-menu" class="mobile-menu fixed inset-y-0 right-0 w-64 bg-white shadow-lg z-50 md:hidden">
            <div class="p-6">
                <div class="flex justify-end mb-8">
                    <button id="close-menu-btn" class="p-2 text-gray-400 hover:text-gray-600">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <nav class="space-y-6">
                    <a href="/" class="block text-gray-700 hover:text-blue-600 text-lg">Home</a>
                    <a href="/resources" class="block text-gray-700 hover:text-blue-600 text-lg">Resources</a>
                    <a href="/gallery" class="block text-gray-700 hover:text-blue-600 text-lg">Gallery</a>
                    <div class="pt-6 border-t border-gray-200">
                        <a href="https://tally.so/r/mBVWK1">
                            <button
                                class="w-full bgBlue hover:bg-blue-600 text-white px-4 py-3 rounded-full text-sm font-medium transition-colors flex items-center justify-center">
                                Submit a Paper
                                <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                                </svg>
                            </button>
                        </a>
                    </div>
                </nav>
            </div>
        </div>
    </header>

    <!-- Mobile menu overlay -->
    <div id="menu-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden hidden"></div>

    <!--Projects Section -->
    <section class="fade-in-section max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-16">
        <div class="md:flex justify-between items-end  mb-12 gap-4">
            <div class="lg:w-3/6">
                <h2 class="text-4xl lg:text-5xl text-gray-900 mb-4">
                    Research Initiatives & Events
                </h2>
                <p class="text-gray-600 text-lg max-w-4xl leading-relaxed">
                    A curated archive of research initiatives, workshops, symposia, and exhibitions carried out by our
                    academic community.
                </p>
            </div>
        </div>
        <div class="space-y-4 mb-8 lg:flex items-end">
            <div class="lg:w-3/6 max-w-4xl">
                <p class="text-sm text-gray-600 leading-loose">
                    Filter by year, theme, or region to discover design explorations, case studies, and theoretical
                    frameworks addressing the built environment and its evolving challenges.
                </p>
            </div>
            <div class="">
                <!-- Filter Section -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Theme Dropdown -->
                    <div class="space-y-2">
                        <label class="block text-sm/[10px] font-medium text-gray-400 mb-2 ps-3">Theme</label>
                        <div class="relative">
                            <select
                                class="w-full appearance-none bg-white border border-gray-200 rounded-full px-6 py-4 pr-12 text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all cursor-pointer">
                                <option value="">Select theme here</option>
                                <option value="Research">Research</option>
                                <option value="Symposium">Symposium</option>
                                <option value="Workshop">Workshop</option>
                                <option value="Exhibition">Exhibition</option>
                                <option value="Collaboration">Collaboration</option>
                            </select>
                            <div class="absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none">
                                <i class="fas fa-chevron-down text-gray-400 text-sm"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Region Dropdown -->
                    <div class="space-y-2">
                        <label class="block text-sm/[10px] font-medium text-gray-400 mb-2 ps-3">Region</label>
                        <div class="relative">
                            <select
                                class="w-full appearance-none bg-white border border-gray-200 rounded-full px-6 py-4 pr-12 text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all cursor-pointer">
                                <option value="">Select region here</option>
                                <option value="north-america">North America</option>
                                <option value="europe">Europe</option>
                                <option value="asia">Asia</option>
                                <option value="africa">Africa</option>
                                <option value="south-america">South America</option>
                                <option value="oceania">Oceania</option>
                            </select>
                            <div class="absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none">
                                <i class="fas fa-chevron-down text-gray-400 text-sm"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Year Dropdown -->
                    <div class="space-y-2">
                        <label class="block text-sm/[10px] font-medium text-gray-400 mb-2 ps-3">Year</label>
                        <div class="relative">
                            <select
                                class="w-full appearance-none bg-white border border-gray-200 rounded-full px-6 py-4 pr-12 text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all cursor-pointer">
                                <option value="">Select year here</option>
                                <option value="2024">2024</option>
                                <option value="2023">2023</option>
                                <option value="2022">2022</option>
                                <option value="2021">2021</option>
                                <option value="2020">2020</option>
                                <option value="2019">2019</option>
                                <option value="2018">2018</option>
                            </select>
                            <div class="absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none">
                                <i class="fas fa-chevron-down text-gray-400 text-sm"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </section>

    <!-- Project Cards Grid -->
    <section class="fade-in-section max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-16">
        <div id="initiatives-grid" class="grid lg:grid-cols-3 gap-8">
            <!-- Data will be injected here via script.js -->
            <div class="col-span-full text-center py-12 text-gray-500">Loading Initiatives...</div>
        </div>

    </section>

    <!-- Footer Content -->
    <div id="footer"></div>



    <!-- Search Modal -->
    <div id="searchModal" class="fixed inset-0 bg-black/50 hidden z-50">
        <div class="bg-white max-w-2xl mx-auto mt-24 rounded-2xl shadow-lg overflow-hidden">
            <!-- Search Input -->
            <div class="border-b px-6 py-4">
                <input id="searchInput" type="text" placeholder="Search papers, gallery, projects..."
                    class="w-full text-lg focus:outline-none" />
            </div>

            <!-- Search Results -->
            <div id="searchResults" class="max-h-[400px] overflow-y-auto divide-y">
                <!-- Results injected here -->
            </div>
        </div>
    </div>

    <!-- Javascript -->
    <script type="module" src="../script.js"></script>
    <script type="module">
        import { supabase } from '../supabase.js';

        // Fetch Featured Initiatives
        async function loadInitiatives() {
            const container = document.getElementById('initiatives-grid');
            if (!container) return;

            const { data: initiatives, error } = await supabase
                .from('initiatives')
                .select('*')
                .order('created_at', { ascending: false });

            if (error) {
                console.error("Error fetching initiatives:", error);
                container.innerHTML = '<div class="col-span-full text-center py-12 text-gray-500">Error loading data.</div>';
                return;
            }

            if (!initiatives || initiatives.length === 0) {
                container.innerHTML = '<div class="col-span-full text-center py-12 text-gray-500">No initiatives found.</div>';
                return;
            }

            container.innerHTML = initiatives.map(item => `
                 <div class="rounded-2xl overflow-hidden group">
                    <div class="relative">
                        <img src="${item.image_url}" alt="${item.title}"
                            class="w-full h-96 object-cover bg-gray-100">
                    </div>
                    <div class="py-6">
                        <h3 class="text-xl font-medium text-gray-900 mb-4 line-clamp-2">${item.title}</h3>

                        <div class="grid grid-cols-3 gap-y-3 text-sm">
                            <div>
                                <span class="text-gray-500 block text-xs">Category</span>
                                <span class="text-gray-900">${item.category}</span>
                            </div>
                            <div>
                                <span class="text-gray-500 block text-xs">Year</span>
                                <span class="text-gray-900">${item.year}</span>
                            </div>
                            <div>
                                <span class="text-gray-500 block text-xs">Location</span>
                                <span class="text-gray-900">${item.location}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        loadInitiatives();
    </script>
    <script type="module" src="/js/footer.js"></script>
</body>

</html>